# 位移数据处理工具

这是一个基于Streamlit的位移数据处理工具，用于处理VTU格式的有限元分析结果文件和NPY格式的数组文件。

## 功能特性

- 📁 **VTU文件读取**: 支持从本地选择并读取VTU文件
- 📊 **数据提取**: 自动提取X、Y、Z位移分量和应力数据
- 💾 **NPY文件支持**: 可以加载和保存NPY格式的数组文件
- 🔍 **数据预览**: 实时查看数据形状、类型和数值范围
- 💿 **批量保存**: 将所有snapshots和参数保存到指定文件夹
- 📈 **进度显示**: 处理大文件时显示实时进度

## 安装依赖

1. 确保已安装Python 3.7+
2. 安装所需的依赖包：

```bash
pip install -r requirements.txt
```

## 运行应用

在项目目录下运行以下命令启动Streamlit应用：

```bash
streamlit run streamlit_app.py
```

应用将在浏览器中自动打开，默认地址为 `http://localhost:8501`

## 使用方法

### 1. 读取VTU文件

1. 点击"选择VTU文件"按钮，从本地选择VTU文件
2. 系统会自动分析文件并显示可用的deltaT值
3. 设置参数范围（起始值、结束值、步长）
4. 点击"开始处理VTU数据"按钮开始处理
5. 处理完成后，数据会保存到session state中

### 2. 读取NPY文件

1. 点击"选择NPY文件"按钮，可以选择多个NPY文件
2. 系统会根据文件名自动识别数据类型：
   - 包含"snapshots_x"或"x"的文件作为X分量数据
   - 包含"snapshots_y"或"y"的文件作为Y分量数据
   - 包含"snapshots_z"或"z"的文件作为Z分量数据
   - 包含"stress"的文件作为应力数据
   - 包含"param"的文件作为参数数据
3. 点击"加载NPY数据"按钮加载数据

### 3. 保存数据

1. 在右侧面板中输入保存文件夹名称
2. 点击"保存所有数据"按钮
3. 系统会创建文件夹并保存以下文件：
   - `snapshots_x.npy`: X分量数据
   - `snapshots_y.npy`: Y分量数据
   - `snapshots_z.npy`: Z分量数据
   - `snapshots_stress.npy`: 应力数据
   - `param.npy`: 参数数据

### 4. 数据预览

在右侧面板中可以：
- 查看文件读取信息
- 查看已加载数组的详细信息
- 预览不同数据的形状、类型和数值范围
- 查看数据的前几行/前几个值

## 文件结构

- `streamlit_app.py`: 主应用文件
- `extract_displacement_components.py`: 数据提取功能模块
- `file_read.py`: 原始数据读取脚本
- `requirements.txt`: 依赖包列表
- `README.md`: 使用说明

## 注意事项

1. VTU文件必须包含deltaT标识的位移分量数据
2. NPY文件命名建议包含数据类型关键词以便自动识别
3. 处理大文件时请耐心等待，系统会显示处理进度
4. 保存的数据文件夹会在当前工作目录下创建

## 技术栈

- **Streamlit**: Web应用框架
- **PyVista**: VTU文件读取和处理
- **NumPy**: 数值计算
- **Pandas**: 数据处理
- **Matplotlib**: 可视化支持

## 故障排除

如果遇到问题，请检查：
1. 是否安装了所有依赖包
2. VTU文件格式是否正确
3. 文件路径是否可访问
4. Python版本是否兼容（建议3.7+） 